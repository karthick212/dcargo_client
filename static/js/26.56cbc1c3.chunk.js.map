{"version":3,"sources":["API.js","common.js","pages/add/requester.js"],"names":["axios","create","baseURL","validateEmail","email","test","clear","state","exceptions","splitException","split","Object","keys","forEach","key","includes","validateFields","emptyFields","emailFields","data","error","emptyKeyArr","map","m","emailKeyArr","isError","errVal","filter","className","class","aria-hidden","Requester","props","onChange","event","target","name","value","setState","onValidation","ref","onSubmit","isUpdate","action","userid","post","then","res","status","history","push","alert","workertype","console","log","catch","err","componentDidMount","location","undefined","get","params","id","view","ID","requester","RequesterName","title","Title","description","Description","reward","Reward","timeallotted","TimeAllotted","propsTitle","this","tag","type","disabled","required","color","onClick","React","Component"],"mappings":"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","file":"static/js/26.56cbc1c3.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  baseURL: `http://3.230.230.205:4000/api/`\r\n  // baseURL: `http://localhost:4000/api/`\r\n});","import React from 'react'\r\nexport const validateEmail=(email)=> {\r\n\tconst re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\treturn re.test(email);\r\n}\r\n\r\nexport const clear=(state,exceptions='')=>{\r\n\tconst splitException=exceptions.split(\",\");\r\n\tObject.keys(state).forEach(key=> {\r\n\t\tif(!splitException.includes(key))\r\n\t\t\tstate[key]=''\r\n\t});\r\n\treturn state;\r\n}\r\n\r\nexport const validateFields=(state,emptyFields=[],emailFields=[])=>{\r\n\tconst data=state;\r\n\tlet error=clear(data.error)\r\n\r\n\tconst emptyKeyArr=emptyFields.map(m=>m.key)\r\n\tconst emailKeyArr=emailFields.map(m=>m.key)\r\n\tdata.isError=false;\r\n\r\n\tObject.keys(data).forEach(key=> {\r\n\t\t if(emptyKeyArr.includes(key)&&data[key]==='') {\r\n\t\t \tdata.isError=true;\r\n\t\t \tlet errVal=emptyFields.filter(m=>m.key==key)[0].errVal\r\n\t\t \terror[key]=(<span className=\"error\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i> {errVal}</span>)\r\n\t\t}\r\n\t\telse if(emailKeyArr.includes(key)&&!validateEmail(data[key])) {\r\n\t\t \tdata.isError=true;\r\n\t\t \tlet errVal=emailFields.filter(m=>m.key==key)[0].errVal\r\n\t\t \terror[key]=(<span className=\"error\"><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i> {errVal}</span>)\r\n\t\t}\r\n\t});\r\n\treturn data;\r\n}\r\n\r\nexport const customValidation=(state,key,errVal)=>{\r\n\tconst data=state;\r\n\tlet error=data.error\r\n\r\n\terror[key]=(<span className=\"error\">{errVal}</span>)\r\n\tdata.isError=true\r\n\treturn data\r\n}\r\n","import React from 'react'\r\nimport { Card, Button, CardHeader, CardBody } from 'reactstrap';\r\n\r\nimport { validateEmail, clear, validateFields, customValidation } from '../../common.js'\r\nimport axios from '../../API.js'\r\n\r\nclass Requester extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tid: '1', requester: '', title: '', description: '', reward: '', timeallotted: '', isError: false, isUpdate: false,\r\n\t\t\terror: { requester: '', title: '', description: '', reward: '', timeallotted: '' }\r\n\t\t}\r\n\t}\r\n\tonChange = (event) => {\r\n\t\tconst data = this.state\r\n\t\tdata[event.target.name] = event.target.value\r\n\t\tthis.setState({ data })\r\n\t\tif (data.isError)\r\n\t\t\tthis.onValidation(data)\r\n\t}\r\n\tonValidation = (ref = '') => {\r\n\t\tconst emptyFields = [\r\n\t\t\t{ key: 'requester', errVal: 'Enter Requester' },\r\n\t\t\t{ key: 'title', errVal: 'Enter Title' },\r\n\t\t\t{ key: 'description', errVal: 'Enter Description' },\r\n\t\t\t{ key: 'reward', errVal: 'Enter Reward' },\r\n\t\t\t{ key: 'timeallotted', errVal: 'Enter Reward' }\r\n\t\t]\r\n\t\tconst data = validateFields(ref === '' ? this.state : ref, emptyFields)\r\n\r\n\t\tthis.setState({ data })\r\n\t\treturn data.isError\r\n\t}\r\n\tonSubmit = () => {\r\n\t\tconst data = this.state\r\n\t\tif (!this.onValidation()) {\r\n\t\t\tif (this.state.isUpdate) {\r\n\t\t\t\tlet data = this.state\r\n\t\t\t\tdata.action = 'update'\r\n\t\t\t\tdata.userid = '1'\r\n\t\t\t\taxios.post(\"/Requesters/Update\", data).then(res => {\r\n\t\t\t\t\tif (res.data.status === 'success') {\r\n\t\t\t\t\t\tthis.props.history.push('/Requesters')\r\n\t\t\t\t\t\talert('Requester Details Updated Successfully..!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet data = this.state\r\n\t\t\t\tdata.workertype = 'work1'\r\n\t\t\t\tdata.userid = '1'\r\n\t\t\t\taxios.post(\"/Requesters/Add\", data).then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.data.status === 'success')\r\n\t\t\t\t\t\tthis.props.history.push('/Requesters')\r\n\t\t\t\t\talert('Requester Details Added Successfully..!!')\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\t// \tif(!res.isError) {\r\n\t\t// \t\taxios.post(this.props.common.serverURL+\"/axios/Users/Add\",data).then(res=>{\r\n\t\t// \t\t\tif(res.data.status==='success')\r\n\t\t// \t\t\t\tthis.props.history.push({pathname:'/workerRegister',state:res.data.data.insertId})\r\n\t\t// \t\t}).catch(err=>{\r\n\t\t// \t\t\tconsole.log(err)\r\n\t\t// \t\t})\r\n\t\t// \t}\r\n\t\t// })\r\n\t}\r\n\r\n\tcomponentDidMount = () => {\r\n\t\tconsole.log(this.props.location.state)\r\n\t\tif (this.props.location.state !== undefined) {\r\n\t\t\taxios.get(\"/Requesters\", { params: { id: this.props.location.state.id } }).then(res => {\r\n\t\t\t\tlet view = res.data.data[0];\r\n\t\t\t\tthis.setState({ id: view.ID, requester: view.RequesterName, title: view.Title, description: view.Description, reward: view.Reward, timeallotted: view.TimeAllotted, isUpdate: true })\r\n\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\taxios.get(\"/Requesters/Auto\").then(res => {\r\n\t\t\t\tthis.setState({ id: res.data[0].id })\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet propsTitle = !this.state.isUpdate ? \"Add\" : \"Update\";\r\n\r\n\t\tlet view = (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"menubar\">\r\n\r\n\t\t\t\t\t<div className=\"row text-left\">\r\n\t\t\t\t\t\t<div className=\"col-2\"></div>\r\n\t\t\t\t\t\t<div className=\"col-8\">\r\n\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t<CardHeader tag=\"h4\">{propsTitle} Requester</CardHeader>\r\n\t\t\t\t\t\t\t\t<CardBody className=\"padding-20 font-weight-bold\">\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Requester ID</label>\r\n\t\t\t\t\t\t\t\t\t\t<input name=\"id\" type=\"text\" className=\"form-control\" disabled value={this.state.id} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Requester Name</label>\r\n\t\t\t\t\t\t\t\t\t\t<input name=\"requester\" type=\"text\" className=\"form-control\" required onChange={this.onChange} value={this.state.requester} />\r\n\t\t\t\t\t\t\t\t\t\t{this.state.error.requester}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Title</label>\r\n\t\t\t\t\t\t\t\t\t\t<input name=\"title\" type=\"text\" className=\"form-control\" required onChange={this.onChange} value={this.state.title} />\r\n\t\t\t\t\t\t\t\t\t\t{this.state.error.title}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Description</label>\r\n\t\t\t\t\t\t\t\t\t\t<textarea name=\"description\" type=\"text\" className=\"form-control\" required onChange={this.onChange} value={this.state.description} ></textarea>\r\n\t\t\t\t\t\t\t\t\t\t{this.state.error.description}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Reward</label>\r\n\t\t\t\t\t\t\t\t\t\t<input name=\"reward\" type=\"text\" className=\"form-control\" required onChange={this.onChange} value={this.state.reward} />\r\n\t\t\t\t\t\t\t\t\t\t{this.state.error.reward}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Time Allotted</label>\r\n\t\t\t\t\t\t\t\t\t\t<input name=\"timeallotted\" type=\"number\" className=\"form-control\" required onChange={this.onChange} value={this.state.timeallotted} />\r\n\t\t\t\t\t\t\t\t\t\t{this.state.error.timeallotted}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-right\">\r\n\t\t\t\t\t\t\t\t\t\t<Button color=\"primary\" onClick={this.onSubmit}>Submit</Button>{'  '}\r\n\t\t\t\t\t\t\t\t\t\t<Button color=\"secondary\" onClick={this.clear}>Clear</Button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</CardBody>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-2\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</>\r\n\t\t)\r\n\t\treturn view;\r\n\t}\r\n}\r\nexport default Requester;"],"sourceRoot":""}